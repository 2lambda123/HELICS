FIND_PACKAGE(SWIG REQUIRED)
INCLUDE(${SWIG_USE_FILE})

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
INCLUDE_DIRECTORIES("${PROJECT_SOURCE_DIR}/src/helics/shared_api_library")



FIND_PACKAGE(PythonLibs)
INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH})
INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_DIRS})

SET(CMAKE_SWIG_FLAGS "")

SWIG_ADD_LIBRARY(helicsPYTHON LANGUAGE python SOURCES helicsPYTHON.i)

SWIG_LINK_LIBRARIES(helicsPYTHON helicsSharedLib)
SWIG_LINK_LIBRARIES(helicsPYTHON ${PYTHON_LIBRARIES})


if (APPLE)

   SET_TARGET_PROPERTIES(helicsSharedLib PROPERTIES MACOSX_RPATH TRUE)
   SET_TARGET_PROPERTIES(helicsSharedLib PROPERTIES CMAKE_INSTALL_RPATH_USE_LINK_PATH TRUE)

   SET_TARGET_PROPERTIES(_helicsPYTHON PROPERTIES MACOSX_RPATH TRUE)

   SET_TARGET_PROPERTIES(_helicsPYTHON PROPERTIES CMAKE_INSTALL_RPATH_USE_LINK_PATH TRUE)

   # SET_TARGET_PROPERTIES(helicsPYTHON PROPERTIES INSTALL_RPATH "@loader_path/../../..")

else()

   SET_TARGET_PROPERTIES(_helicsPYTHON PROPERTIES INSTALL_RPATH "${CMAKE_INSTALL_PREFIX}/lib")
   SET_TARGET_PROPERTIES(_helicsPYTHON PROPERTIES INSTALL_RPATH_USE_LINK_PATH TRUE)

endif()
